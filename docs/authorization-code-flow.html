<!DOCTYPE html>
<html>

<head>
    <title>OpenID Connect</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link rel="icon" href="../assets/common/images/favicon.png" referrerpolicy="no-referrer" />
    <link rel="stylesheet" type="text/css" href="../assets/common/styles/ubisecure.css" referrerpolicy="no-referrer" />
    <link rel="stylesheet" type="text/css" href="./assets/local/styles/collapsed.css" referrerpolicy="no-referrer" />
    <style type="text/css">
        :root {
            --font-size: 12pt;
            --grid-main-area-width: minmax(auto, 72em);
        }
        input:invalid {
            background-color: salmon;
        }
    </style>
    <script async type="module">
        import { parsed } from "../assets/common/modules/document-promises.js";
        import { create_repository_menu, set_button_href_handlers, set_table_select_handlers } from "../assets/common/modules/helper-module.js";
        import { Configuration } from "./assets/local/modules/configuration.js";
        import { http_get, http_post } from "../assets/common/modules/fetch.js";
        import { hide_all_sections, show_section, hide_section, get_form_value, create_form_input } from "./assets/local/modules/tester/helpers.js";
        import { build_authorization_request, build_authorization_response } from "./assets/local/modules/tester/Authorization.js";
        import { build_token_request, build_token_response } from "./assets/local/modules/tester/AccessToken.js";
        import { build_id_token, build_id_token_decoded } from "./assets/local/modules/tester/IdToken.js";
        import { build_introspection_request, build_introspection_response } from "./assets/local/modules/tester/Introspection.js";
        import { build_userinfo_request, build_userinfo_response } from "./assets/local/modules/tester/UserInfo.js";
        const configuration = new Configuration();
        async function build_page() {
            await parsed;
            hide_all_sections();
            show_section("authorization_request");
            await set_button_href_handlers();
            if (! await build_authorization_request(configuration)) {
                return;
            }
            if (await build_authorization_response()) {
                show_section("authorization_response");
            }
            if (await build_token_request(configuration)) {
                hide_section("authorization_request");
                show_section("token_request");
            }
            await build_id_token(configuration);
            await build_introspection_request(configuration);
            await build_userinfo_request(configuration);
        }
        build_page();
    </script>
</head>

<body>

    <header>
        <nav>
            <button href="./index.html" target="_self">
                <icon class="home"></icon>&nbsp;<span>Home</span>
            </button>
            <button href="authorization-code-flow.html" target="_self">Tester</button>
            <button href="configuration.html" target="_self">Configuration</button>
        </nav>
        <nav>
            <button href="https://ubisecure.com" class="ubisecure-standard-logo-h-reverse">&nbsp;</button>
        </nav>
    </header>

    <main>
        <section class="outline">
            <section id="authorization_request" class="collapsed">
                <input type="checkbox" id="authorization_request_hide" />
                <h2><label for="authorization_request_hide">Authorization Request</label></h2>
                <section>
                    <form autocomplete="off" novalidate>
                        <label>
                            <span>authorization_endpoint</span>
                            <input class="flex1" type="text" placeholder="authorization_endpoint"
                                name="authorization_endpoint" />
                        </label>
                        <label>
                            <span>response_type</span>
                            <input class="flex1" type="text" placeholder="response_type" name="response_type" />
                        </label>
                        <label>
                            <span>client_id</span>
                            <input class="flex1" type="text" placeholder="client_id" name="client_id" />
                        </label>
                        <label>
                            <span>redirect_uri</span>
                            <input class="flex1" type="text" placeholder="redirect_uri" name="redirect_uri" />
                        </label>
                        <label>
                            <span>scope</span>
                            <input class="flex1" type="text" placeholder="scope" name="scope" />
                        </label>
                        <label>
                            <span>state</span>
                            <input class="flex1" type="text" placeholder="state" name="state" />
                        </label>
                        <label>
                            <span>nonce</span>
                            <input class="flex1" type="text" placeholder="nonce" name="nonce" />
                        </label>
                        <label>
                            <span>display</span>
                            <input class="flex1" type="text" placeholder="display" name="display" />
                        </label>
                        <label>
                            <span>max_age</span>
                            <input class="flex1" type="text" placeholder="max_age" name="max_age" />
                        </label>
                        <label>
                            <span>prompt</span>
                            <select class="flex1" placeholder="prompt" name="prompt">
                                <option></option>
                                <option>none</option>
                                <option>login</option>
                                <option>consent</option>
                                <option>select_account</option>
                            </select>
                        </label>
                        <label>
                            <span>ui_locales</span>
                            <input class="flex1" type="text" placeholder="ui_locales" name="ui_locales" />
                        </label>
                        <label>
                            <span>acr_values</span>
                            <input class="flex1" type="text" placeholder="acr_values" name="acr_values" />
                        </label>
                        <label>
                            <span>code_challenge_method</span>
                            <select class="flex1" placeholder="code_challenge_method" name="code_challenge_method">
                                <option></option>
                                <option>plain</option>
                                <option>S256</option>
                            </select>
                        </label>
                        <label>
                            <span>code_challenge</span>
                            <input class="flex1" type="text" placeholder="code_challenge" name="code_challenge" />
                        </label>
                        <div>
                            <button type="submit">GET</button>
                            <button type="reset">Reset</button>
                        </div>
                    </form>
                </section>
            </section>
            <section id="authorization_response" class="collapsed">
                <input type="checkbox" id="authorization_response_hide" checked />
                <h3><label for="authorization_response_hide">Authorization Response</label></h3>
                <section>
                    <form autocomplete="off">
                    </form>
                </section>
            </section>
        </section>

        <section class="outline">
            <section id="token_request" class="collapsed">
                <input type="checkbox" id="token_request_hide" checked />
                <h2><label for="token_request_hide">Token Request</label></h2>
                <section>
                    <form autocomplete="off" novalidate>
                        <label>
                            <span>token_endpoint</span>
                            <input class="flex1" type="text" placeholder="token_endpoint" name="token_endpoint" />
                        </label>
                        <label>
                            <span>grant_type</span>
                            <input class="flex1" type="text" placeholder="grant_type" name="grant_type" />
                        </label>
                        <label>
                            <span>code</span>
                            <input class="flex1" type="text" placeholder="code" name="code" />
                        </label>
                        <label>
                            <span>code_verifier</span>
                            <input class="flex1" type="text" placeholder="code_verifier" name="code_verifier" />
                        </label>
                        <label>
                            <span>redirect_uri</span>
                            <input class="flex1" type="text" placeholder="redirect_uri" name="redirect_uri" />
                        </label>
                        <label>
                            <span>client_id</span>
                            <input class="flex1" type="text" placeholder="client_id" name="client_id" />
                        </label>
                        <label>
                            <span>client_secret</span>
                            <input class="flex1" type="text" placeholder="client_secret" name="client_secret" />
                        </label>
                        <div>
                            <button type="submit">POST</button>
                            <button type="reset">Reset</button>
                        </div>
                    </form>
                </section>
            </section>
            <section id="token_response" class="collapsed">
                <input type="checkbox" id="token_response_hide" checked />
                <h3><label for="token_response_hide">Token Response</label></h3>
                <section>
                    <form autocomplete="off">
                    </form>
                </section>
            </section>
        </section>

        <section class="outline">
            <section id="id_token" class="collapsed">
                <input type="checkbox" id="id_token_hide" checked />
                <h2><label for="id_token_hide">ID Token</label></h2>
                <section>
                    <form autocomplete="off">
                        <label>
                            <span>jwks_uri</span>
                            <input class="flex1" type="text" placeholder="jwks_uri" name="jwks_uri" />
                        </label>
                        <label>
                            <span>id_token</span>
                            <input class="flex1" type="text" placeholder="id_token" name="id_token" />
                        </label>
                        <div>
                            <button type="submit">Decode</button>
                            <button type="reset">Reset</button>
                        </div>
                    </form>
                </section>
            </section>
            <section id="id_token_decoded" class="collapsed">
                <input type="checkbox" id="id_token_decoded_hide" checked />
                <h3><label for="id_token_decoded_hide">ID Token Decoded</label></h3>
                <section>
                    <form autocomplete="off">
                    </form>
                </section>
            </section>
        </section>

        <section class="outline">
            <section id="introspection_request" class="collapsed">
                <input type="checkbox" id="introspection_request_hide" checked />
                <h2><label for="introspection_request_hide">Introspection Request</label></h2>
                <section>
                    <form autocomplete="off">
                        <label>
                            <span>introspection_endpoint</span>
                            <input class="flex1" type="text" placeholder="introspection_endpoint"
                                name="introspection_endpoint" />
                        </label>
                        <label>
                            <span>token</span>
                            <input class="flex1" type="text" placeholder="token" name="token" />
                        </label>
                        <label>
                            <span>client_id</span>
                            <input class="flex1" type="text" placeholder="client_id" name="client_id" />
                        </label>
                        <label>
                            <span>client_secret</span>
                            <input class="flex1" type="text" placeholder="client_secret" name="client_secret" />
                        </label>
                        <div>
                            <button type="submit">POST</button>
                            <button type="reset">Reset</button>
                        </div>
                    </form>
                </section>
            </section>
            <section id="introspection_response" class="collapsed">
                <input type="checkbox" id="introspection_response_hide" checked />
                <h3><label for="introspection_response_hide">Introspection Response</label></h3>
                <section>
                    <form autocomplete="off">
                    </form>
                </section>
            </section>
        </section>

        <section class="outline">
            <section id="userinfo_request" class="collapsed">
                <input type="checkbox" id="userinfo_request_hide" checked />
                <h2><label for="userinfo_request_hide">UserInfo Request</label></h2>
                <section>
                    <form autocomplete="off">
                        <label>
                            <span>userinfo_endpoint</span>
                            <input class="flex1" type="text" placeholder="userinfo_endpoint" name="userinfo_endpoint" />
                        </label>
                        <label>
                            <span>access_token</span>
                            <input class="flex1" type="text" placeholder="access_token" name="access_token" />
                        </label>
                        <div>
                            <button type="submit" name="get">GET</button>
                            <button type="submit" name="post">POST</button>
                            <button type="reset">Reset</button>
                        </div>
                    </form>
                </section>
            </section>
            <section id="userinfo_response" class="collapsed">
                <input type="checkbox" id="userinfo_response_hide" checked />
                <h3><label for="userinfo_response_hide">UserInfo Response</label></h3>
                <section>
                    <form autocomplete="off">
                    </form>
                </section>
            </section>
        </section>
    </main>

</body>

</html>